{"ast":null,"code":"var _jsxFileName = \"/Users/real/Desktop/last \\u0E1E\\u0E23\\u0E35\\u0E23\\u0E2D\\u0E1A5/give-for-child/src/backoffice/DonateBack.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react'; // import { Link } from 'react-router-dom';\n\nimport { Table, Form, FormControl, Button, Card, Row, Col } from 'react-bootstrap';\nimport { BsTrash } from 'react-icons/bs';\nimport './css/ActivityBack.css';\nimport axios from 'axios';\nimport moment from 'moment';\nimport Swal from 'sweetalert2';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst DateThai = date => {\n  return date.toLocaleDateString('th-TH', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  });\n};\n\n_c = DateThai;\nvar setTimeOut;\n\nconst DonateBack = () => {\n  _s();\n\n  const [rowData, setRowData] = useState([]);\n  useEffect(() => {\n    updateRows();\n  }, []);\n  const [search, setSearch] = useState('');\n  useEffect(() => {\n    window.clearTimeout(setTimeOut);\n    setTimeOut = setTimeout(() => {\n      updateRows(search ? search : '');\n    }, 500);\n  }, [search]);\n\n  const updateRows = async (search = null) => {\n    let data = {\n      foundation: localStorage.getItem('foundation'),\n      search: search\n    };\n    axios.post(`/donation/foundation/`, data).then(res => {\n      if (res.data) {\n        setRowData(res.data.map(v => setRow(v)));\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const DonateSuccess = async id => {\n    axios.put(`/donation/success/${id}`).then(res => {\n      if (res.status == 200) {\n        updateRows();\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const sendMail = () => {\n    axios.get(`/donation/sendmail`).then(res => {\n      Swal.fire({\n        title: 'ส่ง Email เรียบร้อย',\n        icon: 'success',\n        confirmButtonColor: 'Green',\n        confirmButtonText: 'ตกลง'\n      }).then(result => {});\n    });\n  };\n\n  const setRow = data => {\n    // ใส่ชื่อ column ทั้งหมดตาม table\n    return /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n        children: data.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: data.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: data.tel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: data.location\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: DateThai(new Date(data.date_time))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: data.is_success ? /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"warning\",\n          disabled: true,\n          children: \"\\u0E40\\u0E23\\u0E35\\u0E22\\u0E1A\\u0E23\\u0E49\\u0E2D\\u0E22\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"success\",\n          onClick: () => {\n            confirm(() => {\n              DonateSuccess(data.id);\n            });\n          },\n          children: \"\\u0E2A\\u0E33\\u0E40\\u0E23\\u0E47\\u0E08\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => {\n            confirm(() => {\n              cancelDonate(data.id);\n            });\n          },\n          variant: \"outline-danger\",\n          children: /*#__PURE__*/_jsxDEV(BsTrash, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this);\n  };\n\n  const confirm = methed => {\n    Swal.fire({\n      title: 'ยืนยัน',\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#0062cc',\n      cancelButtonColor: '#ccc',\n      confirmButtonText: 'ลบ',\n      cancelButtonText: 'ยกเลิก'\n    }).then(result => {\n      if (result.isConfirmed) {\n        methed();\n      }\n    });\n  };\n\n  const cancelDonate = id => {\n    axios.delete(`/donation/${id}/`).then(res => {\n      Swal.fire({\n        title: 'ลบข้อมูลสำเร็จ!',\n        text: 'กด ok เพื่อดำเนินการต่อ',\n        icon: 'success',\n        confirmButtonColor: 'Green',\n        confirmButtonText: 'Ok'\n      }).then(result => {\n        if (result.isConfirmed) {\n          window.location.reload();\n        }\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"all-font\",\n    style: {\n      width: 'calc(100%-300px;)',\n      height: '100vh',\n      overflow: 'scroll'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '3rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        style: {\n          padding: '1.5rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n          children: \"\\u0E23\\u0E31\\u0E1A\\u0E1A\\u0E23\\u0E34\\u0E08\\u0E32\\u0E04\\u0E2A\\u0E34\\u0E48\\u0E07\\u0E02\\u0E2D\\u0E07\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            col: 6,\n            children: /*#__PURE__*/_jsxDEV(Form, {\n              inline: true,\n              children: /*#__PURE__*/_jsxDEV(FormControl, {\n                type: \"text\",\n                placeholder: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E1C\\u0E39\\u0E49\\u0E40\\u0E02\\u0E49\\u0E32\\u0E23\\u0E48\\u0E27\\u0E21\",\n                className: \" mr-sm-2\",\n                style: {\n                  marginLeft: '2%',\n                  marginTop: '1.5%'\n                },\n                onChange: e => setSearch(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            col: 6,\n            inline: true,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              style: {\n                float: 'right',\n                width: 250\n              },\n              onClick: sendMail,\n              children: \"\\u0E2A\\u0E48\\u0E07 Email \\u0E41\\u0E08\\u0E49\\u0E07\\u0E40\\u0E15\\u0E37\\u0E2D\\u0E19\\u0E2A\\u0E33\\u0E2B\\u0E23\\u0E31\\u0E1A\\u0E27\\u0E31\\u0E19\\u0E19\\u0E35\\u0E49\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          striped: true,\n          hover: true,\n          style: {\n            marginTop: '1.5%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E1C\\u0E39\\u0E49\\u0E1A\\u0E23\\u0E34\\u0E08\\u0E32\\u0E04\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0E40\\u0E1A\\u0E2D\\u0E23\\u0E4C\\u0E42\\u0E17\\u0E23\\u0E28\\u0E31\\u0E1E\\u0E17\\u0E4C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E17\\u0E35\\u0E48\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0E27\\u0E31\\u0E19\\u0E41\\u0E25\\u0E30\\u0E40\\u0E27\\u0E25\\u0E32\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: rowData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 159,\n    columnNumber: 9\n  }, this);\n};\n\n_s(DonateBack, \"UY5BdNnKKmhUl4p/RDLysY3ov1I=\");\n\n_c2 = DonateBack;\nexport default DonateBack;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"DateThai\");\n$RefreshReg$(_c2, \"DonateBack\");","map":{"version":3,"sources":["/Users/real/Desktop/last พรีรอบ5/give-for-child/src/backoffice/DonateBack.js"],"names":["React","useState","useEffect","Table","Form","FormControl","Button","Card","Row","Col","BsTrash","axios","moment","Swal","DateThai","date","toLocaleDateString","year","month","day","setTimeOut","DonateBack","rowData","setRowData","updateRows","search","setSearch","window","clearTimeout","setTimeout","data","foundation","localStorage","getItem","post","then","res","map","v","setRow","catch","err","console","log","DonateSuccess","id","put","status","sendMail","get","fire","title","icon","confirmButtonColor","confirmButtonText","result","name","tel","location","Date","date_time","is_success","confirm","cancelDonate","methed","showCancelButton","cancelButtonColor","cancelButtonText","isConfirmed","delete","text","reload","width","height","overflow","padding","marginLeft","marginTop","e","target","value","float"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n// import { Link } from 'react-router-dom';\nimport { Table, Form, FormControl, Button, Card, Row, Col } from 'react-bootstrap';\nimport { BsTrash } from 'react-icons/bs';\nimport './css/ActivityBack.css';\nimport axios from 'axios';\nimport moment from 'moment';\n\nimport Swal from 'sweetalert2';\n\n\n\nconst DateThai = (date) => {\n    return date.toLocaleDateString('th-TH', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n    });\n};\n\nvar setTimeOut;\nconst DonateBack = () => {\n    const [rowData, setRowData] = useState([]);\n\n    useEffect(() => {\n        updateRows();\n    }, []);\n\n    const [search, setSearch] = useState('');\n    useEffect(() => {\n        window.clearTimeout(setTimeOut);\n\n        setTimeOut = setTimeout(() => {\n            updateRows(search ? search : '');\n        }, 500);\n    }, [search]);\n\n    const updateRows = async (search = null) => {\n        let data = {\n            foundation: localStorage.getItem('foundation'),\n            search: search\n        }\n        axios\n            .post(`/donation/foundation/`,data)\n            .then((res) => {\n                if (res.data) {\n                    setRowData(res.data.map((v) => setRow(v)));\n                }\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    };\n    const DonateSuccess = async (id) => {\n        axios\n            .put(`/donation/success/${id}`)\n            .then((res) => {\n                if (res.status == 200) {\n                    updateRows();\n                }\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    };\n    \n    const sendMail = () => {\n        axios.get(`/donation/sendmail`).then((res) => {\n            Swal.fire({\n                title: 'ส่ง Email เรียบร้อย',\n                icon: 'success',\n                confirmButtonColor: 'Green',\n                confirmButtonText: 'ตกลง',\n            }).then((result) => {\n                \n            });\n        });\n    }\n\n    const setRow = (data) => {\n        // ใส่ชื่อ column ทั้งหมดตาม table\n        return (\n            <tr>\n                <td>{data.id}</td>\n                <td>{data.name}</td>\n                <td>{data.tel}</td>\n                <td>{data.location}</td>\n                {/* {moment(data.start_time).format('MMMM Do YYYY')} -{' '} */}\n\n                <td>{DateThai(new Date(data.date_time))}</td>\n                <td>\n                    {data.is_success ? (\n                        <Button variant='warning' disabled>\n                            เรียบร้อย\n                        </Button>\n                    ) : (\n                        <Button\n                            variant='success'\n                            onClick={() => {\n                                confirm(() => {\n                                    DonateSuccess(data.id)\n                                })\n                            }}\n                        >\n                            สำเร็จ\n                        </Button>\n                    )}\n                </td>\n                <td>\n                    <Button\n                        onClick={() => {\n                            confirm(() => {\n                                cancelDonate(data.id)\n                            })\n                        }}\n                        variant='outline-danger'\n                    >\n                        <BsTrash />\n                    </Button>\n                </td>\n            </tr>\n        );\n    };\n\n    \n    const confirm = (methed) => {\n        Swal.fire({\n            title: 'ยืนยัน',\n            icon: 'warning',\n            showCancelButton: true,\n            confirmButtonColor: '#0062cc',\n            cancelButtonColor: '#ccc',\n            confirmButtonText: 'ลบ',\n            cancelButtonText: 'ยกเลิก'\n        }).then((result) => {\n            if (result.isConfirmed) {\n                methed();\n            }\n        });\n    };\n\n    const cancelDonate = (id) => {\n        axios.delete(`/donation/${id}/`).then((res) => {\n            Swal.fire({\n                title: 'ลบข้อมูลสำเร็จ!',\n                text: 'กด ok เพื่อดำเนินการต่อ',\n                icon: 'success',\n                confirmButtonColor: 'Green',\n                confirmButtonText: 'Ok',\n            }).then((result) => {\n                if (result.isConfirmed) {\n                    window.location.reload();\n                }\n            });\n        });\n    }\n\n    return (\n        <div\n            className='all-font'\n            style={{\n                width: 'calc(100%-300px;)',\n                height: '100vh',\n                overflow: 'scroll',\n            }}\n        >\n            <div style={{ padding: '3rem' }}>\n                <Card style={{ padding: '1.5rem' }}>\n                    <Card.Title>รับบริจาคสิ่งของ</Card.Title>\n                    <Row>\n                        <Col col={6}>\n                            <Form inline>\n                                <FormControl\n                                    type='text'\n                                    placeholder='ค้นหาชื่อผู้เข้าร่วม'\n                                    className=' mr-sm-2'\n                                    style={{ marginLeft: '2%', marginTop: '1.5%' }}\n                                    onChange={(e) => setSearch(e.target.value)}\n                                />\n                                {}\n                            </Form>\n                        </Col>\n                        <Col col={6} inline>\n                            <Button style={{float:'right',width:250}} onClick={sendMail}>ส่ง Email แจ้งเตือนสำหรับวันนี้</Button>\n                        </Col>\n                    </Row>\n\n                    <Table striped hover style={{ marginTop: '1.5%' }}>\n                        <thead>\n                            <tr>\n                                <th>ID</th>\n                                <th>ชื่อผู้บริจาค</th>\n                                <th>เบอร์โทรศัพท์</th>\n                                <th>สถานที่</th>\n                                <th>วันและเวลา</th>\n                                <th>ตัวเลือก</th>\n                                <th></th>\n                            </tr>\n                        </thead>\n                        <tbody>{rowData}</tbody>\n                    </Table>\n                </Card>\n            </div>\n        </div>\n    );\n};\n\nexport default DonateBack;\n"]},"metadata":{},"sourceType":"module"}