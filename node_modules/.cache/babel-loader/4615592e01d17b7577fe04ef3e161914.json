{"ast":null,"code":"var _jsxFileName = \"/Users/real/Desktop/last/give-for-child/src/backoffice/JoinActivity.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Table, Form, FormControl, Button, Card, Col, Row } from 'react-bootstrap';\nimport { BsTrash } from 'react-icons/bs';\nimport './css/ActivityBack.css';\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst DateThai = date => {\n  return date.toLocaleDateString('th-TH', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  });\n};\n\n_c = DateThai;\nvar setTimeOut;\n\nconst JoinActivity = () => {\n  _s();\n\n  const [rowData, setRowData] = useState([]);\n  useEffect(() => {\n    updateRows();\n  }, []);\n  const [search, setSearch] = useState('');\n  useEffect(() => {\n    window.clearTimeout(setTimeOut);\n    setTimeOut = setTimeout(() => {\n      updateRows(search ? search : '');\n    }, 500);\n  }, [search]);\n\n  const updateRows = async (search = null) => {\n    let data = {\n      foundation: localStorage.getItem('foundation'),\n      search: search\n    };\n    axios.post(`/join_activity/foundation/`, data).then(res => {\n      if (res.data) {\n        setRowData(res.data.map(v => setRow(v)));\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const JoinActivitySuccess = async id => {\n    axios.put(`/join_activity/success/${id}`).then(res => {\n      if (res.status == 200) {\n        updateRows();\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const confirm = methed => {\n    Swal.fire({\n      title: 'ยืนยัน',\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#0062cc',\n      cancelButtonColor: '#ccc',\n      confirmButtonText: 'ลบ',\n      cancelButtonText: 'ยกเลิก'\n    }).then(result => {\n      if (result.isConfirmed) {\n        methed();\n      }\n    });\n  };\n\n  const cancelJoinActivity = async id => {\n    await axios.delete(`/join_activity/${id}`).then(res => {\n      Swal.fire({\n        title: 'ลบแล้ว',\n        icon: 'success',\n        confirmButtonColor: 'Green',\n        confirmButtonText: 'ตกลง'\n      }).then(result => {\n        if (result.isConfirmed) {\n          updateRows();\n        }\n      });\n    });\n  };\n\n  const sendMail = () => {\n    axios.get(`/join_activity/sendmail`).then(res => {\n      Swal.fire({\n        title: 'ส่ง Email เรียบร้อย',\n        icon: 'success',\n        confirmButtonColor: 'Green',\n        confirmButtonText: 'ตกลง'\n      }).then(result => {});\n    });\n  };\n\n  const setRow = data => {\n    // ใส่ชื่อ column ทั้งหมดตาม table\n    return /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n        children: data.join_id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: data.activity_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: data.member_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: data.tel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: data.location\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: DateThai(new Date(data.created_at))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: data.is_success ? /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"warning\",\n          disabled: true,\n          children: \"\\u0E40\\u0E23\\u0E35\\u0E22\\u0E1A\\u0E23\\u0E49\\u0E2D\\u0E22\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"success\",\n          onClick: () => {\n            confirm(() => {\n              JoinActivitySuccess(data.join_id);\n            });\n          },\n          children: \"\\u0E2A\\u0E33\\u0E40\\u0E23\\u0E47\\u0E08\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline-danger\",\n          onClick: () => {\n            confirm(() => {\n              cancelJoinActivity(data.join_id);\n            });\n          },\n          children: /*#__PURE__*/_jsxDEV(BsTrash, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"all-font\",\n    style: {\n      width: 'calc(100%-300px;)',\n      height: '100vh',\n      overflow: 'scroll'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '3rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        style: {\n          padding: '1.5rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n          children: \"\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E01\\u0E32\\u0E23\\u0E40\\u0E02\\u0E49\\u0E32\\u0E23\\u0E48\\u0E27\\u0E21\\u0E01\\u0E34\\u0E08\\u0E01\\u0E23\\u0E23\\u0E21\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            col: 6,\n            children: /*#__PURE__*/_jsxDEV(Form, {\n              inline: true,\n              children: /*#__PURE__*/_jsxDEV(FormControl, {\n                type: \"text\",\n                placeholder: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E1C\\u0E39\\u0E49\\u0E40\\u0E02\\u0E49\\u0E32\\u0E23\\u0E48\\u0E27\\u0E21\",\n                className: \" mr-sm-2\",\n                style: {\n                  marginLeft: '2%',\n                  marginTop: '1.5%'\n                },\n                onChange: e => setSearch(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            col: 6,\n            inline: true,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              style: {\n                float: 'right',\n                width: 250\n              },\n              onClick: sendMail,\n              children: \"\\u0E2A\\u0E48\\u0E07 Email \\u0E41\\u0E08\\u0E49\\u0E07\\u0E40\\u0E15\\u0E37\\u0E2D\\u0E19\\u0E2A\\u0E33\\u0E2B\\u0E23\\u0E31\\u0E1A\\u0E27\\u0E31\\u0E19\\u0E19\\u0E35\\u0E49\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          striped: true,\n          hover: true,\n          style: {\n            marginTop: '1.5%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E01\\u0E34\\u0E08\\u0E01\\u0E23\\u0E23\\u0E21\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0E1C\\u0E39\\u0E49\\u0E40\\u0E02\\u0E49\\u0E32\\u0E23\\u0E48\\u0E27\\u0E21\\u0E21\\u0E01\\u0E34\\u0E08\\u0E01\\u0E23\\u0E23\\u0E21\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0E40\\u0E1A\\u0E2D\\u0E23\\u0E4C\\u0E42\\u0E17\\u0E23\\u0E28\\u0E31\\u0E1E\\u0E17\\u0E4C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E17\\u0E35\\u0E48\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E01\\u0E14\\u0E40\\u0E02\\u0E49\\u0E32\\u0E23\\u0E48\\u0E27\\u0E21\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: rowData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 153,\n    columnNumber: 9\n  }, this);\n};\n\n_s(JoinActivity, \"UY5BdNnKKmhUl4p/RDLysY3ov1I=\");\n\n_c2 = JoinActivity;\nexport default JoinActivity;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"DateThai\");\n$RefreshReg$(_c2, \"JoinActivity\");","map":{"version":3,"sources":["/Users/real/Desktop/last/give-for-child/src/backoffice/JoinActivity.js"],"names":["React","useState","useEffect","Link","Table","Form","FormControl","Button","Card","Col","Row","BsTrash","axios","Swal","DateThai","date","toLocaleDateString","year","month","day","setTimeOut","JoinActivity","rowData","setRowData","updateRows","search","setSearch","window","clearTimeout","setTimeout","data","foundation","localStorage","getItem","post","then","res","map","v","setRow","catch","err","console","log","JoinActivitySuccess","id","put","status","confirm","methed","fire","title","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","result","isConfirmed","cancelJoinActivity","delete","sendMail","get","join_id","activity_name","member_name","tel","location","Date","created_at","is_success","width","height","overflow","padding","marginLeft","marginTop","e","target","value","float"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Table, Form, FormControl, Button, Card,Col,Row } from 'react-bootstrap';\nimport { BsTrash } from 'react-icons/bs';\nimport './css/ActivityBack.css';\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\n\n\n\nconst DateThai = (date) => {\n    return date.toLocaleDateString('th-TH', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n    });\n};\n\nvar setTimeOut;\nconst JoinActivity = () => {\n    \n    const [rowData, setRowData] = useState([]);\n\n    useEffect(() => {\n        updateRows();\n    }, []);\n\n    const [search, setSearch] = useState('');\n    useEffect(() => {\n        window.clearTimeout(setTimeOut);\n\n        setTimeOut = setTimeout(() => {\n            updateRows(search ? search : '');\n        }, 500);\n    }, [search]);\n\n    const updateRows = async (search = null) => {\n        let data = {\n            foundation: localStorage.getItem('foundation'),\n            search: search\n        }\n        axios\n            .post(`/join_activity/foundation/`,data)\n            .then((res) => {\n                if (res.data) {\n                    setRowData(res.data.map((v) => setRow(v)));\n                }\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    };\n\n    const JoinActivitySuccess = async (id) => {\n        axios\n            .put(`/join_activity/success/${id}`)\n            .then((res) => {\n                if (res.status == 200) {\n                    updateRows();\n                }\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    };\n    \n    const confirm = (methed) => {\n        Swal.fire({\n            title: 'ยืนยัน',\n            icon: 'warning',\n            showCancelButton: true,\n            confirmButtonColor: '#0062cc',\n            cancelButtonColor: '#ccc',\n            confirmButtonText: 'ลบ',\n            cancelButtonText: 'ยกเลิก'\n        }).then((result) => {\n            if (result.isConfirmed) {\n                methed();\n            }\n        });\n    };\n    \n    const cancelJoinActivity = async (id) => {\n        await axios.delete(`/join_activity/${id}`).then((res) => {\n            Swal.fire({\n                title: 'ลบแล้ว',\n                icon: 'success',\n                confirmButtonColor: 'Green',\n                confirmButtonText: 'ตกลง',\n            }).then((result) => {\n                if (result.isConfirmed) {\n                    updateRows();\n                }\n            });\n        });\n    }\n\n    \n    const sendMail = () => {\n        axios.get(`/join_activity/sendmail`).then((res) => {\n            Swal.fire({\n                title: 'ส่ง Email เรียบร้อย',\n                icon: 'success',\n                confirmButtonColor: 'Green',\n                confirmButtonText: 'ตกลง',\n            }).then((result) => {\n                \n            });\n        });\n    }\n\n\n    const setRow = (data) => {\n        // ใส่ชื่อ column ทั้งหมดตาม table\n        return (\n            <tr>\n                <td>{data.join_id}</td>\n                <td>{data.activity_name}</td>\n                <td>{data.member_name}</td>\n                <td>{data.tel}</td>\n                <td>{data.location}</td>\n                <td>{DateThai(new Date(data.created_at))}</td>\n                <td>\n                    {data.is_success ? (\n                        <Button variant='warning' disabled>\n                            เรียบร้อย\n                        </Button>\n                    ) : (\n                        <Button\n                            variant='success'\n                            onClick={() => {\n                                confirm(() => {JoinActivitySuccess(data.join_id);})\n                            }}\n                        >\n                            สำเร็จ\n                        </Button>\n                    )}\n                </td>\n                <td>\n                    <Button variant='outline-danger'\n                        onClick={() => {\n                            confirm(() => {cancelJoinActivity(data.join_id)})\n                        }}\n                    >\n                        <BsTrash />\n                    </Button>\n                </td>\n            </tr>\n        );\n    };\n\n    return (\n        <div\n            className='all-font'\n            style={{\n                width: 'calc(100%-300px;)',\n                height: '100vh',\n                overflow: 'scroll',\n            }}\n        >\n            <div style={{ padding: '3rem' }}>\n                <Card style={{ padding: '1.5rem' }}>\n                    <Card.Title>ข้อมูลการเข้าร่วมกิจกรรม</Card.Title>\n                    <Row>\n                        <Col col={6}>\n                            <Form inline>\n                                <FormControl\n                                    type='text'\n                                    placeholder='ค้นหาชื่อผู้เข้าร่วม'\n                                    className=' mr-sm-2'\n                                    style={{ marginLeft: '2%', marginTop: '1.5%' }}\n                                    onChange={(e) => setSearch(e.target.value)}\n                                />\n                                {}\n                            </Form>\n                        </Col>\n                        <Col col={6} inline>\n                            <Button style={{float:'right',width:250}} onClick={sendMail}>ส่ง Email แจ้งเตือนสำหรับวันนี้</Button>\n                        </Col>\n                    </Row>\n                    <Table striped hover style={{ marginTop: '1.5%' }}>\n                        <thead>\n                            <tr>\n                                <th>ID</th>\n                                <th>ชื่อกิจกรรม</th>\n                                <th>ผู้เข้าร่วมมกิจกรรม</th>\n                                <th>เบอร์โทรศัพท์</th>\n                                <th>สถานที่</th>\n                                <th>วันที่กดเข้าร่วม</th>\n                                <th>ตัวเลือก</th>\n                                <th></th>\n                            </tr>\n                        </thead>\n                        <tbody>{rowData}</tbody>\n                    </Table>\n                </Card>\n            </div>\n        </div>\n    );\n};\n\nexport default JoinActivity;\n"]},"metadata":{},"sourceType":"module"}