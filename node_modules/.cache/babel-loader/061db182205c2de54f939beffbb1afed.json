{"ast":null,"code":"var _jsxFileName = \"/Users/real/Desktop/last \\u0E1E\\u0E23\\u0E35\\u0E23\\u0E2D\\u0E1A5/give-for-child/src/backoffice/ActivityBack.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Table, Form, FormControl, Button, Card, Pagination, Row } from 'react-bootstrap';\nimport { BsTrash } from 'react-icons/bs';\nimport './css/ActivityBack.css';\nimport Swal from 'sweetalert2';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst DateThai = date => {\n  return date.toLocaleDateString('th-TH', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  });\n};\n\n_c = DateThai;\nvar setTimeOut;\n\nconst ActivityBack = () => {\n  _s();\n\n  const [rowData, setRowData] = useState([]);\n  useEffect(() => {\n    updateRows();\n  }, []);\n  const [search, setSearch] = useState('');\n  useEffect(() => {\n    window.clearTimeout(setTimeOut);\n    setTimeOut = setTimeout(() => {\n      updateRows(search ? search : '');\n    }, 500);\n  }, [search]);\n\n  const updateRows = async (search = null) => {\n    let data = {\n      foundation: localStorage.getItem('foundation'),\n      search: search\n    };\n    axios.post(`/activities/foundation/`, data).then(res => {\n      if (res.data) {\n        setRowData(res.data.map(v => setRow(v)));\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const confirm = methed => {\n    Swal.fire({\n      title: 'ยืนยัน',\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#0062cc',\n      cancelButtonColor: '#ccc',\n      confirmButtonText: 'ลบ',\n      cancelButtonText: 'ยกเลิก'\n    }).then(result => {\n      if (result.isConfirmed) {\n        methed();\n      }\n    });\n  };\n\n  const cancelActivity = id => {\n    axios.delete(`/activity/${id}/`).then(res => {\n      Swal.fire({\n        title: 'เรียบร้อย',\n        // text: 'Your file has been deleted.',\n        icon: 'success',\n        confirmButtonColor: 'Green',\n        confirmButtonText: 'ตกลง'\n      }).then(result => {\n        if (result.isConfirmed) {\n          updateRows();\n        }\n      });\n    });\n  };\n\n  const setRow = data => {\n    // ใส่ชื่อ column ทั้งหมดตาม table\n    return /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n        children: data.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: `../resources/uploads/` + data.image,\n          alt: \"\",\n          style: {\n            width: '80px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: data.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: data.tel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: data.location\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: [DateThai(new Date(data.start_time)), \" - \", DateThai(new Date(data.end_time))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: data.person_max\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: `/backend/activity-edit/${data.id}`,\n          style: {\n            color: 'white'\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"warning\",\n            children: \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          className: \"buttonD\",\n          onClick: () => {\n            confirm(() => {\n              cancelActivity(data.id);\n            });\n          },\n          variant: \"danger\",\n          children: /*#__PURE__*/_jsxDEV(BsTrash, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"all-font\",\n    style: {\n      width: 'calc(100%-300px;)',\n      height: '100vh',\n      overflow: 'scroll'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '3rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        style: {\n          padding: '1.5rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n          children: \"\\u0E01\\u0E34\\u0E08\\u0E01\\u0E23\\u0E23\\u0E21\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/backend/create-activity\",\n            style: {\n              color: 'white'\n            },\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              children: \"\\u0E2A\\u0E23\\u0E49\\u0E32\\u0E07\\u0E01\\u0E34\\u0E08\\u0E01\\u0E23\\u0E23\\u0E21\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          inline: true,\n          children: /*#__PURE__*/_jsxDEV(FormControl, {\n            type: \"text\",\n            placeholder: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E01\\u0E34\\u0E08\\u0E01\\u0E23\\u0E23\\u0E21\",\n            className: \" mr-sm-2\",\n            style: {\n              marginTop: '1.5%'\n            },\n            onChange: e => {\n              setSearch(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          striped: true,\n          hover: true,\n          style: {\n            marginTop: '1.5%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0E23\\u0E39\\u0E1B\\u0E20\\u0E32\\u0E1E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E01\\u0E34\\u0E08\\u0E01\\u0E23\\u0E23\\u0E21\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0E40\\u0E1A\\u0E2D\\u0E23\\u0E4C\\u0E42\\u0E17\\u0E23\\u0E28\\u0E31\\u0E1E\\u0E17\\u0E4C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E17\\u0E35\\u0E48\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0E27\\u0E31\\u0E19\\u0E40\\u0E23\\u0E34\\u0E48\\u0E21-\\u0E08\\u0E1A\\u0E01\\u0E34\\u0E08\\u0E01\\u0E23\\u0E23\\u0E21\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E04\\u0E19\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: rowData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ActivityBack, \"UY5BdNnKKmhUl4p/RDLysY3ov1I=\");\n\n_c2 = ActivityBack;\nexport default ActivityBack;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"DateThai\");\n$RefreshReg$(_c2, \"ActivityBack\");","map":{"version":3,"sources":["/Users/real/Desktop/last พรีรอบ5/give-for-child/src/backoffice/ActivityBack.js"],"names":["React","useState","useEffect","Link","Table","Form","FormControl","Button","Card","Pagination","Row","BsTrash","Swal","axios","DateThai","date","toLocaleDateString","year","month","day","setTimeOut","ActivityBack","rowData","setRowData","updateRows","search","setSearch","window","clearTimeout","setTimeout","data","foundation","localStorage","getItem","post","then","res","map","v","setRow","catch","err","console","log","confirm","methed","fire","title","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","result","isConfirmed","cancelActivity","id","delete","image","width","name","tel","location","Date","start_time","end_time","person_max","color","height","overflow","padding","marginTop","e","target","value"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,KAAT,EAAgBC,IAAhB,EAAsBC,WAAtB,EAAmCC,MAAnC,EAA2CC,IAA3C,EAAiDC,UAAjD,EAA6DC,GAA7D,QAAwE,iBAAxE;AACA,SAASC,OAAT,QAAwB,gBAAxB;AACA,OAAO,wBAAP;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AAEA,MAAMC,QAAQ,GAAIC,IAAD,IAAU;AACvB,SAAOA,IAAI,CAACC,kBAAL,CAAwB,OAAxB,EAAiC;AACpCC,IAAAA,IAAI,EAAE,SAD8B;AAEpCC,IAAAA,KAAK,EAAE,MAF6B;AAGpCC,IAAAA,GAAG,EAAE;AAH+B,GAAjC,CAAP;AAKH,CAND;;KAAML,Q;AAQN,IAAIM,UAAJ;;AACA,MAAMC,YAAY,GAAG,MAAM;AAAA;;AACvB,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBtB,QAAQ,CAAC,EAAD,CAAtC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZsB,IAAAA,UAAU;AACb,GAFQ,EAEN,EAFM,CAAT;AAIA,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBzB,QAAQ,CAAC,EAAD,CAApC;AACAC,EAAAA,SAAS,CAAC,MAAM;AACZyB,IAAAA,MAAM,CAACC,YAAP,CAAoBR,UAApB;AAEAA,IAAAA,UAAU,GAAGS,UAAU,CAAC,MAAM;AAC1BL,MAAAA,UAAU,CAACC,MAAM,GAAGA,MAAH,GAAY,EAAnB,CAAV;AACH,KAFsB,EAEpB,GAFoB,CAAvB;AAGH,GANQ,EAMN,CAACA,MAAD,CANM,CAAT;;AAQA,QAAMD,UAAU,GAAG,OAAOC,MAAM,GAAG,IAAhB,KAAyB;AACxC,QAAIK,IAAI,GAAG;AACPC,MAAAA,UAAU,EAAEC,YAAY,CAACC,OAAb,CAAqB,YAArB,CADL;AAEPR,MAAAA,MAAM,EAAEA;AAFD,KAAX;AAIAZ,IAAAA,KAAK,CACAqB,IADL,CACW,yBADX,EACoCJ,IADpC,EAEKK,IAFL,CAEWC,GAAD,IAAS;AACX,UAAIA,GAAG,CAACN,IAAR,EAAc;AACVP,QAAAA,UAAU,CAACa,GAAG,CAACN,IAAJ,CAASO,GAAT,CAAcC,CAAD,IAAOC,MAAM,CAACD,CAAD,CAA1B,CAAD,CAAV;AACH;AACJ,KANL,EAOKE,KAPL,CAOYC,GAAD,IAAS;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,KATL;AAUH,GAfD;;AAiBA,QAAMG,OAAO,GAAIC,MAAD,IAAY;AACxBjC,IAAAA,IAAI,CAACkC,IAAL,CAAU;AACNC,MAAAA,KAAK,EAAE,QADD;AAENC,MAAAA,IAAI,EAAE,SAFA;AAGNC,MAAAA,gBAAgB,EAAE,IAHZ;AAINC,MAAAA,kBAAkB,EAAE,SAJd;AAKNC,MAAAA,iBAAiB,EAAE,MALb;AAMNC,MAAAA,iBAAiB,EAAE,IANb;AAONC,MAAAA,gBAAgB,EAAE;AAPZ,KAAV,EAQGlB,IARH,CAQSmB,MAAD,IAAY;AAChB,UAAIA,MAAM,CAACC,WAAX,EAAwB;AACpBV,QAAAA,MAAM;AACT;AACJ,KAZD;AAaH,GAdD;;AAgBA,QAAMW,cAAc,GAAIC,EAAD,IAAQ;AAC3B5C,IAAAA,KAAK,CAAC6C,MAAN,CAAc,aAAYD,EAAG,GAA7B,EAAiCtB,IAAjC,CAAuCC,GAAD,IAAS;AAC3CxB,MAAAA,IAAI,CAACkC,IAAL,CAAU;AACNC,QAAAA,KAAK,EAAE,WADD;AAEN;AACAC,QAAAA,IAAI,EAAE,SAHA;AAINE,QAAAA,kBAAkB,EAAE,OAJd;AAKNE,QAAAA,iBAAiB,EAAE;AALb,OAAV,EAMGjB,IANH,CAMSmB,MAAD,IAAY;AAChB,YAAIA,MAAM,CAACC,WAAX,EAAwB;AACpB/B,UAAAA,UAAU;AACb;AACJ,OAVD;AAWH,KAZD;AAaH,GAdD;;AAiBA,QAAMe,MAAM,GAAIT,IAAD,IAAU;AACrB;AACA,wBACI;AAAA,8BACI;AAAA,kBAAKA,IAAI,CAAC2B;AAAV;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAA,+BACI;AAAK,UAAA,GAAG,EAAG,uBAAD,GAA0B3B,IAAI,CAAC6B,KAAzC;AAAgD,UAAA,GAAG,EAAC,EAApD;AAAuD,UAAA,KAAK,EAAE;AAAEC,YAAAA,KAAK,EAAE;AAAT;AAA9D;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAFJ,eAKI;AAAA,kBAAK9B,IAAI,CAAC+B;AAAV;AAAA;AAAA;AAAA;AAAA,cALJ,eAMI;AAAA,kBAAK/B,IAAI,CAACgC;AAAV;AAAA;AAAA;AAAA;AAAA,cANJ,eAOI;AAAA,kBAAKhC,IAAI,CAACiC;AAAV;AAAA;AAAA;AAAA;AAAA,cAPJ,eAQI;AAAA,mBACKjD,QAAQ,CAAC,IAAIkD,IAAJ,CAASlC,IAAI,CAACmC,UAAd,CAAD,CADb,SAC6CnD,QAAQ,CAAC,IAAIkD,IAAJ,CAASlC,IAAI,CAACoC,QAAd,CAAD,CADrD;AAAA;AAAA;AAAA;AAAA;AAAA,cARJ,eAWI;AAAA,kBAAKpC,IAAI,CAACqC;AAAV;AAAA;AAAA;AAAA;AAAA,cAXJ,eAYI;AAAA,+BACI,QAAC,IAAD;AAAM,UAAA,EAAE,EAAG,0BAAyBrC,IAAI,CAAC2B,EAAG,EAA5C;AAA+C,UAAA,KAAK,EAAE;AAAEW,YAAAA,KAAK,EAAE;AAAT,WAAtD;AAAA,iCACI,QAAC,MAAD;AAAQ,YAAA,OAAO,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAZJ,eAmBI;AAAA,+BACI,QAAC,MAAD;AACA,UAAA,SAAS,EAAC,SADV;AAEI,UAAA,OAAO,EAAE,MAAM;AACXxB,YAAAA,OAAO,CAAC,MAAM;AAAEY,cAAAA,cAAc,CAAC1B,IAAI,CAAC2B,EAAN,CAAd;AAAyB,aAAlC,CAAP;AACH,WAJL;AAKI,UAAA,OAAO,EAAC,QALZ;AAAA,iCAOI,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAPJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAnBJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAiCH,GAnCD;;AAqCA,sBACI;AACI,IAAA,SAAS,EAAC,UADd;AAEI,IAAA,KAAK,EAAE;AACHG,MAAAA,KAAK,EAAE,mBADJ;AAEHS,MAAAA,MAAM,EAAE,OAFL;AAGHC,MAAAA,QAAQ,EAAE;AAHP,KAFX;AAAA,2BAQI;AAAK,MAAA,KAAK,EAAE;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAAZ;AAAA,6BACI,QAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAAEA,UAAAA,OAAO,EAAE;AAAX,SAAb;AAAA,gCACI,QAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAA,iCACI,QAAC,IAAD;AAAM,YAAA,EAAE,EAAC,0BAAT;AAAoC,YAAA,KAAK,EAAE;AAAEH,cAAAA,KAAK,EAAE;AAAT,aAA3C;AAAA,mCACI,QAAC,MAAD;AAAQ,cAAA,OAAO,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAUI,QAAC,IAAD;AAAM,UAAA,MAAM,MAAZ;AAAA,iCACI,QAAC,WAAD;AACI,YAAA,IAAI,EAAC,MADT;AAEI,YAAA,WAAW,EAAC,kGAFhB;AAGI,YAAA,SAAS,EAAC,UAHd;AAII,YAAA,KAAK,EAAE;AAACI,cAAAA,SAAS,EAAE;AAAZ,aAJX;AAKI,YAAA,QAAQ,EAAGC,CAAD,IAAO;AACb/C,cAAAA,SAAS,CAAC+C,CAAC,CAACC,MAAF,CAASC,KAAV,CAAT;AACH;AAPL;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBAVJ,eAuBI,QAAC,KAAD;AAAO,UAAA,OAAO,MAAd;AAAe,UAAA,KAAK,MAApB;AAAqB,UAAA,KAAK,EAAE;AAAEH,YAAAA,SAAS,EAAE;AAAb,WAA5B;AAAA,kCACI;AAAA,mCACI;AAAA,sCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAJJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBALJ,eAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBANJ,eAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAPJ,eAQI;AAAA;AAAA;AAAA;AAAA,sBARJ,eASI;AAAA;AAAA;AAAA;AAAA,sBATJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBADJ,eAcI;AAAA,sBAAQlD;AAAR;AAAA;AAAA;AAAA;AAAA,kBAdJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAvBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AARJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAqDH,CA5JD;;GAAMD,Y;;MAAAA,Y;AA8JN,eAAeA,YAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Table, Form, FormControl, Button, Card, Pagination, Row } from 'react-bootstrap';\nimport { BsTrash } from 'react-icons/bs';\nimport './css/ActivityBack.css';\nimport Swal from 'sweetalert2';\nimport axios from 'axios';\n\nconst DateThai = (date) => {\n    return date.toLocaleDateString('th-TH', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n    });\n};\n\nvar setTimeOut;\nconst ActivityBack = () => {\n    const [rowData, setRowData] = useState([]);\n\n    useEffect(() => {\n        updateRows();\n    }, []);\n\n    const [search, setSearch] = useState('');\n    useEffect(() => {\n        window.clearTimeout(setTimeOut);\n\n        setTimeOut = setTimeout(() => {\n            updateRows(search ? search : '');\n        }, 500);\n    }, [search]);\n\n    const updateRows = async (search = null) => {\n        let data = {\n            foundation: localStorage.getItem('foundation'),\n            search: search\n        }\n        axios\n            .post(`/activities/foundation/`,data)\n            .then((res) => {\n                if (res.data) {\n                    setRowData(res.data.map((v) => setRow(v)));\n                }\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    };\n        \n    const confirm = (methed) => {\n        Swal.fire({\n            title: 'ยืนยัน',\n            icon: 'warning',\n            showCancelButton: true,\n            confirmButtonColor: '#0062cc',\n            cancelButtonColor: '#ccc',\n            confirmButtonText: 'ลบ',\n            cancelButtonText: 'ยกเลิก'\n        }).then((result) => {\n            if (result.isConfirmed) {\n                methed();\n            }\n        });\n    };\n\n    const cancelActivity = (id) => {\n        axios.delete(`/activity/${id}/`).then((res) => {\n            Swal.fire({\n                title: 'เรียบร้อย',\n                // text: 'Your file has been deleted.',\n                icon: 'success',\n                confirmButtonColor: 'Green',\n                confirmButtonText: 'ตกลง',\n            }).then((result) => {\n                if (result.isConfirmed) {\n                    updateRows();\n                }\n            });\n        });\n    }\n\n\n    const setRow = (data) => {\n        // ใส่ชื่อ column ทั้งหมดตาม table\n        return (\n            <tr>\n                <td>{data.id}</td>\n                <td>\n                    <img src={`../resources/uploads/` + data.image} alt='' style={{ width: '80px' }} />\n                </td>\n                <td>{data.name}</td>\n                <td>{data.tel}</td>\n                <td>{data.location}</td>\n                <td>\n                    {DateThai(new Date(data.start_time))} - {DateThai(new Date(data.end_time))}\n                </td>\n                <td>{data.person_max}</td>\n                <td>\n                    <Link to={`/backend/activity-edit/${data.id}`} style={{ color: 'white' }}>\n                        <Button variant='warning'>\n                                แก้ไข\n                        </Button>\n                    </Link>\n                </td>\n                <td>\n                    <Button\n                    className='buttonD'\n                        onClick={() => {\n                            confirm(() => { cancelActivity(data.id);})\n                        }}\n                        variant='danger'\n                    >\n                        <BsTrash />\n                    </Button>\n                </td>\n            </tr>\n        );\n    };\n\n    return (\n        <div\n            className='all-font'\n            style={{\n                width: 'calc(100%-300px;)',\n                height: '100vh',\n                overflow: 'scroll',\n            }}\n        >\n            <div style={{ padding: '3rem' }}>\n                <Card style={{ padding: '1.5rem' }}>\n                    <Card.Title>กิจกรรม</Card.Title>\n                    <div>\n                        <Link to='/backend/create-activity' style={{ color: 'white' }}>\n                            <Button variant='primary'>\n                                    สร้างกิจกรรม\n                            </Button>\n                        </Link>\n                    </div>\n\n                    <Form inline>\n                        <FormControl\n                            type='text'\n                            placeholder='ค้นหาชื่อกิจกรรม'\n                            className=' mr-sm-2'\n                            style={{marginTop: '1.5%' }}\n                            onChange={(e) => {\n                                setSearch(e.target.value);\n                            }}\n                        />\n                        {/* <Button type='submit'>Submit</Button> */}\n                    </Form>\n\n                    <Table striped hover style={{ marginTop: '1.5%' }}>\n                        <thead>\n                            <tr>\n                                <th>ID</th>\n                                <th>รูปภาพ</th>\n                                <th>ชื่อกิจกรรม</th>\n                                <th>เบอร์โทรศัพท์</th>\n                                <th>สถานที่</th>\n                                <th>วันเริ่ม-จบกิจกรรม</th>\n                                <th>จำนวนคน</th>\n                                <th></th>\n                                <th></th>\n                            </tr>\n                        </thead>\n                        <tbody>{rowData}</tbody>\n                    </Table>\n                </Card>\n            </div>\n        </div>\n    );\n};\n\nexport default ActivityBack;\n"]},"metadata":{},"sourceType":"module"}